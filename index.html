<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>í•˜ë°ìŠ¤ í‚¤ìš°ê¸° v13.4</title>
    <style>
        :root { --bg: #f5f7fa; --card: #ffffff; --point: #ff4d94; --text: #333; --border: #e1e4e8; --success: #40c057; --vocal: #ff4d94; --dance: #ae3ec9; --visual: #4dadff; --variety: #fab005; --charm: #f06595; --money: #2b8a3e; --danger: #fa5252; --sns: #405de6; --yt: #ff0000; --yz: #000000; }
        
        body { background-color: var(--bg); color: var(--text); font-family: 'Pretendard', sans-serif; margin: 0; padding: 0; line-height: 1.5; overflow-x: hidden; }
        
        #start-page {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, #1a1a1a 0%, #333 100%);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            z-index: 10000; color: white; text-align: center;
        }
        .start-logo { font-size: 3rem; font-weight: 900; color: var(--point); margin-bottom: 10px; text-shadow: 0 0 20px rgba(255,77,148,0.5); }
        .start-btn { padding: 18px 60px; background: var(--point); color: white; border: none; border-radius: 50px; font-size: 1.2rem; font-weight: bold; cursor: pointer; transition: 0.3s; }

        .nav-bar { display: none; background: white; border-bottom: 1px solid var(--border); position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .nav-btn { flex: 1; padding: 15px 5px; border: none; background: transparent; color: #666; cursor: pointer; font-weight: bold; font-size: 14px; }
        .nav-btn.active { color: var(--point); border-bottom: 3px solid var(--point); background: #fffafc; }

        .container { display: none; max-width: 900px; margin: 0 auto; padding: 15px 15px 100px 15px; }
        .page { display: none; }
        .page.active { display: block; }

        .card { background: var(--card); border: 1px solid var(--border); padding: 20px; border-radius: 15px; margin-bottom: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.03); position: relative; }
        
        .date-display { text-align: right; margin-bottom: 10px; }
        .day-count { font-weight: bold; color: var(--point); font-size: 18px; display: block; }
        
        h2 { color: #222; font-size: 1.1rem; margin-top: 0; border-left: 4px solid var(--point); padding-left: 10px; margin-bottom: 15px; }
        .money-text { color: var(--money); font-weight: bold; }

        .stat-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        .stat-item { background: #f8f9fa; padding: 10px; border-radius: 10px; }
        .stat-item small { color: #777; font-size: 11px; }
        .stat-item strong { font-size: 15px; display: block; margin-top: 2px; }

        /* ì»¤ë®¤ë‹ˆí‹° ì‘ì„± ì„¹ì…˜ */
        .comm-write-zone { background: #fffafc; border: 1px dashed var(--point); padding: 15px; border-radius: 12px; margin-bottom: 15px; }
        .comm-write-btns { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 10px; }
        .comm-small-btn { padding: 10px 5px; font-size: 12px; border: 1px solid #ddd; border-radius: 8px; background: white; cursor: pointer; font-weight: bold; transition: 0.2s; }
        .comm-small-btn:hover { background: var(--point); color: white; border-color: var(--point); }
        .comm-small-btn:disabled { background: #eee; color: #aaa; cursor: not-allowed; border-color: #eee; }

        .comm-post { border-bottom: 1px solid #eee; padding: 10px 0; font-size: 13px; }
        .site-tag { font-size: 10px; font-weight: bold; padding: 2px 6px; border-radius: 4px; margin-right: 5px; }
        .site-ebem { background: #e7f5ff; color: #1971c2; }
        .site-cafe { background: #fff0f6; color: #d6336c; }
        .site-yz { background: #000; color: #fff; }

        .next-day-bar { display: none; position: fixed; bottom: 0; left: 0; width: 100%; background: white; padding: 12px; border-top: 1px solid var(--border); text-align: center; z-index: 100; box-sizing: border-box; }
        .primary-btn { width: 100%; padding: 14px; background: var(--point); color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; font-size: 16px; }

        .modal-overlay { display: none; position: fixed; z-index: 9000; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.7); backdrop-filter: blur(3px); }
        .modal-content { background:white; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); padding:25px; width: 85%; max-width:400px; border-radius:20px; text-align:center; box-sizing: border-box; }
    </style>
</head>
<body>

<div id="start-page">
    <div class="start-logo">HADES</div>
    <div class="start-sub">Virtual Idol Management</div>
    <button class="start-btn" onclick="startGame()">ê²Œì„ ì‹œì‘</button>
</div>

<div class="nav-bar" id="main-nav">
    <button class="nav-btn active" onclick="openPage('home', this)">ğŸ“Š í™ˆ</button>
    <button class="nav-btn" onclick="openPage('members', this)">ğŸ‘¥ ë©¤ë²„</button>
    <button class="nav-btn" onclick="openPage('manual', this)">ğŸ“… ì§€ì‹œ</button>
</div>

<div class="container" id="main-container">
    <div id="home" class="page active">
        <div class="card">
            <div class="date-display">
                <span class="day-count">ìš´ì˜ <span id="current-day">1</span>ì¼ì°¨</span>
            </div>
            <h2>ìƒíƒœ</h2>
            <div class="stat-grid">
                <div class="stat-item"><small>ë³´ìœ  ìì‚°</small><strong id="p-finance" class="money-text">200,000,000ì›</strong></div>
                <div class="stat-item"><small>íŒ¬ì¹´í˜ íšŒì›</small><strong id="p-fandom">110,000ëª…</strong></div>
                <div class="stat-item"><small>ë„ˆíŠœë¸Œ êµ¬ë…</small><strong id="p-youtube">20,000ëª…</strong></div>
                <div class="stat-item"><small>SNS íŒ”ë¡œì›Œ</small><strong id="p-sns">1,000ëª…</strong></div>
            </div>
        </div>

        <div class="comm-write-zone">
            <h2 style="border:none; padding:0; font-size: 1rem; margin-bottom: 5px;">âœï¸ ì»¤ë®¤ë‹ˆí‹° ê¸€ ì‘ì„±</h2>
            <p id="comm-write-info" style="font-size: 11px; color: #888; margin: 0 0 10px 0;">ì£¼ 1íšŒë§Œ ì‘ì„± ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
            <div class="comm-write-btns" id="comm-btn-group">
                <button class="comm-small-btn" onclick="writePost('ê³µì‹ì¹´í˜')">ğŸ  ì¹´í˜</button>
                <button class="comm-small-btn" onclick="writePost('ì—ë±€')">ğŸ“˜ ì—ë±€</button>
                <button class="comm-small-btn" onclick="writePost('YZ')">ğŸ¦ YZ</button>
            </div>
        </div>

        <div class="card">
            <h2>ğŸŒ ì‹¤ì‹œê°„ ë°˜ì‘</h2>
            <div id="comm-container"></div>
        </div>
    </div>

    <div id="members" class="page">
        <div id="member-grid-container" style="display:grid; gap:10px;"></div>
    </div>
    <div id="manual" class="page">
        <div class="card">
            <h2>ìˆ˜ë™ ì§€ì‹œ</h2>
            <select id="sel-member" style="width:100%; padding:10px; margin-bottom:10px;"></select>
            <select id="sel-stat" style="width:100%; padding:10px; margin-bottom:10px;">
                <option value="vocal">ë³´ì»¬ í›ˆë ¨</option><option value="dance">ëŒ„ìŠ¤ ì—°ìŠµ</option>
                <option value="rest">íœ´ì‹</option>
            </select>
            <button class="primary-btn" onclick="manualTrainAction()">ì§€ì‹œ ì™„ë£Œ</button>
        </div>
    </div>
</div>

<div class="next-day-bar" id="main-footer">
    <button class="primary-btn" style="background: #40c057;" onclick="nextDay()">ğŸŒ™ ë‹¤ìŒë‚ ë¡œ</button>
</div>

<div id="eventModal" class="modal-overlay"><div class="modal-content"><h2 id="modal-title"></h2><div id="modal-body"></div><div id="modal-choices"></div></div></div>

<script>
    let gameState = {
        day: 1, finance: 200000000, fandom: 110000, youtube: 20000, sns: 1000,
        lastWriteWeek: -1, // ê¸€ ì‘ì„± ì£¼ì°¨ ê¸°ë¡
        members: [
            {name: 'í‚¤ë§ˆ', vocal: 11, dance: 10, visual: 10, variety: 9, charm: 10, fatigue: 10, manualAct: null},
            {name: 'ëµê·¤', vocal: 11, dance: 10, visual: 10, variety: 9, charm: 10, fatigue: 10, manualAct: null},
            {name: 'ì±ˆë‚˜', vocal: 9, dance: 10, visual: 11, variety: 9, charm: 10, fatigue: 10, manualAct: null},
            {name: 'ì†œì£¼ë¨¹', vocal: 9, dance: 10, visual: 10, variety: 11, charm: 10, fatigue: 10, manualAct: null},
            {name: 'ì—°ì´ˆë¡', vocal: 11, dance: 10, visual: 10, variety: 10, charm: 10, fatigue: 10, manualAct: null},
        ],
        community: []
    };

    function startGame() {
        document.getElementById('start-page').style.display = 'none';
        document.getElementById('main-nav').style.display = 'flex';
        document.getElementById('main-container').style.display = 'block';
        document.getElementById('main-footer').style.display = 'block';
        updateDisplay();
    }

    function openPage(pageId, btn) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById(pageId).classList.add('active');
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        if(pageId === 'members') renderMembers();
    }

    function updateDisplay() {
        document.getElementById('current-day').innerText = gameState.day;
        document.getElementById('p-finance').innerText = gameState.finance.toLocaleString() + "ì›";
        document.getElementById('p-fandom').innerText = gameState.fandom.toLocaleString() + "ëª…";
        
        // ì£¼ê°„ ê¸€ì“°ê¸° ë²„íŠ¼ í™œì„±í™” ì œì–´
        const currentWeek = Math.floor((gameState.day - 1) / 7);
        const btns = document.querySelectorAll('.comm-small-btn');
        const info = document.getElementById('comm-write-info');
        
        if(gameState.lastWriteWeek === currentWeek) {
            btns.forEach(b => b.disabled = true);
            info.innerText = "ì´ë²ˆ ì£¼ ê¸€ ì‘ì„±ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤. (ë‹¤ìŒ ì£¼ì— ê°€ëŠ¥)";
            info.style.color = "var(--success)";
        } else {
            btns.forEach(b => b.disabled = false);
            info.innerText = "ì£¼ 1íšŒë§Œ ì‘ì„± ê°€ëŠ¥í•©ë‹ˆë‹¤.";
            info.style.color = "#888";
        }

        renderCommunity();
    }

    function writePost(site) {
        const currentWeek = Math.floor((gameState.day - 1) / 7);
        if(gameState.lastWriteWeek === currentWeek) return;

        let gain = Math.floor(Math.random() * 500) + 200;
        gameState.fandom += gain;
        gameState.lastWriteWeek = currentWeek;

        const msg = `[${site}]ì— ë©¤ë²„ë“¤ì˜ ë§¤ë ¥ì„ í™ë³´í•˜ëŠ” ê¸€ì„ ì •ì„±ìŠ¤ëŸ½ê²Œ ì‘ì„±í–ˆìŠµë‹ˆë‹¤! (íŒ¬ +${gain}ëª…)`;
        alert(msg);
        
        gameState.community.unshift({ site: site, text: "ì‚¬ì¥ë‹˜ì´ ì§ì ‘ ì‘ì„±í•œ ì •ì„±ê¸€ì´ ì˜¬ë¼ì™”ìŠµë‹ˆë‹¤!", hot: true });
        updateDisplay();
    }

    function renderCommunity() {
        const container = document.getElementById('comm-container');
        container.innerHTML = gameState.community.map(c => `
            <div class="comm-post">
                <span class="site-tag ${getSiteClass(c.site)}">${c.site}</span> ${c.text}
            </div>
        `).join('') || '<p style="color:#999; font-size:12px;">ì•„ì§ ë°˜ì‘ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
    }

    function getSiteClass(site) {
        if(site === 'ì—ë±€') return 'site-ebem';
        if(site === 'ê³µì‹ì¹´í˜') return 'site-cafe';
        return 'site-yz';
    }

    function nextDay() {
        gameState.day++;
        // ë§¤ì¼ ëœë¤ ë°˜ì‘ ì¶”ê°€ ë¡œì§ ë“± v13.2 ê¸°ëŠ¥ ìœ ì§€...
        if(gameState.community.length > 10) gameState.community.pop();
        updateDisplay();
    }

    // ì´ˆê¸° ë©¤ë²„ ë¦¬ìŠ¤íŠ¸ ë Œë”ë§ìš©
    function renderMembers() {
        const container = document.getElementById('member-grid-container');
        container.innerHTML = gameState.members.map(m => `<div class="card"><strong>${m.name}</strong> (í”¼ë¡œë„: ${m.fatigue})</div>`).join('');
    }

    window.onload = () => {
        const sel = document.getElementById('sel-member');
        gameState.members.forEach((m, i) => {
            let opt = document.createElement('option');
            opt.value = i; opt.innerText = m.name;
            sel.appendChild(opt);
        });
    };
</script>
</body>
</html>
