<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>HADES ê´€ë¦¬ ì‹œìŠ¤í…œ v5.1</title>
    <style>
        :root { --bg: #f5f7fa; --card: #ffffff; --point: #ff4d94; --text: #333; --border: #e1e4e8; --success: #40c057; --vocal: #ff4d94; --dance: #ae3ec9; --visual: #4dadff; --variety: #fab005; --charm: #f06595; }
        body { background-color: var(--bg); color: var(--text); font-family: 'Pretendard', sans-serif; margin: 0; padding: 0; }
        .nav-bar { display: flex; background: white; border-bottom: 1px solid var(--border); position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .nav-btn { flex: 1; padding: 18px; border: none; background: transparent; color: #666; cursor: pointer; font-weight: bold; font-size: 14px; }
        .nav-btn.active { color: var(--point); border-bottom: 3px solid var(--point); background: #fffafc; }
        .container { max-width: 900px; margin: 20px auto; padding: 0 20px 100px 20px; }
        .page { display: none; }
        .page.active { display: block; }
        .card { background: var(--card); border: 1px solid var(--border); padding: 25px; border-radius: 15px; margin-bottom: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.03); position: relative; }
        .date-display { position: absolute; top: 20px; right: 25px; font-weight: bold; color: var(--point); font-size: 18px; }
        h2 { color: #222; font-size: 1.2rem; margin-top: 0; border-left: 4px solid var(--point); padding-left: 10px; margin-bottom: 20px; }
        .comm-post { border-bottom: 1px solid #eee; padding: 12px 0; }
        .comm-site { font-size: 10px; font-weight: bold; padding: 2px 5px; border-radius: 4px; margin-right: 8px; }
        .site-ebem { background: #e7f5ff; color: #1971c2; }
        .site-cafe { background: #fff0f6; color: #d6336c; }
        .member-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 15px; }
        .member-card { background: white; border: 1px solid var(--border); border-radius: 12px; padding: 15px; }
        .stat-row { display: flex; align-items: center; margin-bottom: 5px; font-size: 12px; }
        .stat-label { width: 45px; color: #777; }
        .stat-bar-bg { flex: 1; height: 6px; background: #eee; border-radius: 3px; overflow: hidden; margin: 0 8px; }
        .stat-bar-fill { height: 100%; border-radius: 3px; transition: 0.5s; }
        .primary-btn { width: 100%; padding: 15px; background: var(--point); color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; font-size: 16px; margin-top: 10px; }
        .choice-btn { background: #333; margin-top: 8px; font-size: 14px; transition: 0.2s; }
        .choice-btn:hover { background: #555; }
        .next-day-bar { position: fixed; bottom: 0; left: 0; width: 100%; background: white; padding: 15px; border-top: 1px solid var(--border); text-align: center; z-index: 100; }
    </style>
</head>
<body>

<div class="nav-bar">
    <button class="nav-btn active" onclick="openPage('home', this)">ğŸ“Š í™ˆ</button>
    <button class="nav-btn" onclick="openPage('community', this)">ğŸŒ ì»¤ë®¤ë‹ˆí‹°</button>
    <button class="nav-btn" onclick="openPage('members', this)">ğŸ‘¥ ë©¤ë²„í˜„í™©</button>
    <button class="nav-btn" onclick="openPage('schedule', this)">ğŸ“… ì§€ì‹œ</button>
</div>

<div class="container">
    <div id="home" class="page active">
        <div class="card">
            <div class="date-display">ìš´ì˜ <span id="current-day">1</span>ì¼ì°¨</div>
            <h2>ìƒíƒœ ì½˜ì†”</h2>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                <div><small>ë³´ìœ  ìì‚°</small><br><strong id="p-finance">45,000,000</strong></div>
                <div><small>ì¼€ë¡œ íŒ¬ë¤</small><br><strong id="p-fandom">12,405</strong></div>
            </div>
        </div>
        <div class="card" style="background: #fff9db;">
            <h2>ì˜¤ëŠ˜ì˜ ì†Œì‹</h2>
            <p id="daily-news">í•˜ë°ìŠ¤ í”„ë¡œì íŠ¸ì˜ ì²« ë°œì„ ë‚´ë”›ì—ˆìŠµë‹ˆë‹¤.</p>
        </div>
    </div>

    <div id="community" class="page">
        <div class="card">
            <h2>ì»¤ë®¤ë‹ˆí‹° ë°˜ì‘</h2>
            <div id="comm-container"></div>
        </div>
    </div>

    <div id="members" class="page">
        <div class="member-grid" id="member-grid-container"></div>
    </div>

    <div id="schedule" class="page">
        <div class="card">
            <h2>íŠ¸ë ˆì´ë‹ ì§€ì‹œ</h2>
            <select id="sel-member" style="width:100%; padding:15px; margin-bottom: 10px; border-radius: 10px;"></select>
            <select id="sel-stat" style="width:100%; padding:15px; margin-bottom: 15px; border-radius: 10px;">
                <option value="vocal">ğŸ¤ ë³´ì»¬ í›ˆë ¨</option>
                <option value="dance">ğŸ’ƒ ëŒ„ìŠ¤ í›ˆë ¨</option>
                <option value="visual">âœ¨ ë¹„ì£¼ì–¼ ì¼€ì–´</option>
                <option value="variety">ğŸ—£ï¸ ì˜ˆëŠ¥ í›ˆë ¨</option>
                <option value="charm">ğŸ€ ë§¤ë ¥ í›ˆë ¨</option>
            </select>
            <button class="primary-btn" onclick="trainAction()">í›ˆë ¨ ì‹¤í–‰</button>
        </div>
    </div>
</div>

<div class="next-day-bar">
    <button class="primary-btn" style="background: #40c057; width: auto; padding: 12px 40px;" onclick="nextDay()">ğŸŒ™ ì˜¤ëŠ˜ ì¼ê³¼ ë§ˆë¬´ë¦¬</button>
</div>

<div id="eventModal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); backdrop-filter: blur(4px);">
    <div style="background: white; margin: 15% auto; padding: 30px; width: 350px; border-radius: 20px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
        <h2 id="event-title" style="color:var(--point); margin-bottom:10px;">ëŒë°œ ìƒí™©!</h2>
        <p id="event-desc" style="margin-bottom: 20px; font-size: 14px; line-height: 1.6;"></p>
        <div id="event-choices"></div>
    </div>
</div>

<script>
    let gameState = {
        day: 1, finance: 45000000, fandom: 12405,
        members: [
            {name: 'í‚¤ë§ˆ', vocal: 12, dance: 8, visual: 10, variety: 7, charm: 9, fatigue: 10, acted: false},
            {name: 'ëµê·¤', vocal: 13, dance: 7, visual: 9, variety: 8, charm: 10, fatigue: 10, acted: false},
            {name: 'ì±ˆë‚˜', vocal: 8, dance: 9, visual: 11, variety: 12, charm: 13, fatigue: 10, acted: false},
            {name: 'ì†œì£¼ë¨¹', vocal: 7, dance: 11, visual: 10, variety: 14, charm: 12, fatigue: 10, acted: false},
            {name: 'ì—°ì´ˆë¡', vocal: 12, dance: 9, visual: 12, variety: 6, charm: 11, fatigue: 10, acted: false}
        ],
        community: [{site: 'ì¹´í˜', content: 'í•˜ë°ìŠ¤ ë§¤ë‹ˆì§€ë¨¼íŠ¸ ê°€ë™ ì†Œì‹ì— íŒ¬ë“¤ì´ ì„¤ë ˆí•˜ê³  ìˆìŠµë‹ˆë‹¤.'}]
    };

    const newsList = ["í•˜ë°ìŠ¤ í”„ë¡œì íŠ¸, ì¸ê¸° ê¸‰ìƒìŠ¹ ì¤‘", "ì—°ìŠµ ë„ì¤‘ ë©¤ë²„ë“¤ì˜ ì›ƒìŒì†Œë¦¬ê°€ ëŠì´ì§€ ì•Šì•„", "ë²„ì¸„ì–¼ ì‹œì¥ì˜ ìƒˆë¡œìš´ ê°•ì í•˜ë°ìŠ¤", "ëŒ€í‘œ ë´‰ì¤€, ë‹¤ìŒ í–‰ë³´ëŠ”?"];
    
    // ëŒë°œ ì´ë²¤íŠ¸ ëª©ë¡
    const randomEvents = [
        {
            title: "ğŸ“¡ ë°©ì†¡ ì¥ë¹„ ë…¸í›„í™”",
            desc: "ì†¡ì¶œ ì»´í“¨í„°ê°€ ë…¸í›„ë˜ì–´ ìê¾¸ ë ‰ì´ ê±¸ë¦½ë‹ˆë‹¤. ì–´ë–»ê²Œ í• ê¹Œìš”?",
            choices: [
                { text: "ìµœì‹ í˜•ìœ¼ë¡œ êµì²´ (500ë§Œ ì›)", effect: () => { gameState.finance -= 5000000; addComm('ì—ë±€', 'ì»´í“¨í„° ë°”ê¿¨ë‚˜ ë³´ë„¤? í”„ë ˆì„ ë¯¸ì³¤ë‹¤ ã„·ã„·'); }},
                { text: "ê·¸ëƒ¥ ì°¸ê³  ë²„í‹´ë‹¤", effect: () => { gameState.fandom -= 500; addComm('ì—ë±€', 'ë°©ì†¡ ìê¾¸ ëŠê¸°ëŠ”ë° ìš´ì˜ì§„ ë­í•¨?'); }}
            ]
        },
        {
            title: "ğŸ° ë©¤ë²„ ê°„ì‹ ì„œí¬íŠ¸",
            desc: "íŒ¬ë“¤ì´ ë©¤ë²„ë“¤ì„ ìœ„í•´ ê°„ì‹ì„ ë³´ë‚´ê³  ì‹¶ì–´ í•©ë‹ˆë‹¤.",
            choices: [
                { text: "ì •ì¤‘íˆ ê±°ì ˆí•˜ê³  ë§ˆìŒë§Œ ë°›ëŠ”ë‹¤", effect: () => { gameState.fandom += 200; addComm('ì¹´í˜', 'ì—­ì‹œ ì‹ ë¹„ì£¼ì˜ í•˜ë°ìŠ¤.. ì˜¤íˆë ¤ ì¢‹ì•„'); }},
                { text: "ê°ì‚¬íˆ ë°›ê³  ì¸ì¦ìƒ·ì„ ì˜¬ë¦°ë‹¤", effect: () => { gameState.fandom += 800; addComm('ì¹´í˜', 'ì™€ ì¸ì¦ìƒ· ë–´ë‹¤!! ë‹¤ë“¤ ë„ˆë¬´ ì˜ˆë» ã… ã… '); }}
            ]
        }
    ];

    function openPage(pageId, btn) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(pageId).classList.add('active');
        btn.classList.add('active');
        updateDisplay();
    }

    function updateDisplay() {
        document.getElementById('current-day').innerText = gameState.day;
        document.getElementById('p-finance').innerText = gameState.finance.toLocaleString();
        document.getElementById('p-fandom').innerText = gameState.fandom.toLocaleString();
        
        const sel = document.getElementById('sel-member');
        if(sel.options.length === 0) {
            gameState.members.forEach(m => { sel.innerHTML += `<option value="${m.name}">${m.name}</option>`; });
        }

        const mGrid = document.getElementById('member-grid-container');
        mGrid.innerHTML = gameState.members.map(m => `
            <div class="member-card">
                <div style="display:flex; justify-content:space-between; margin-bottom:10px;"><strong>${m.name}</strong><small>${m.acted?'ì™„ë£Œ':'ëŒ€ê¸°'}</small></div>
                ${renderStat('ë³´ì»¬', m.vocal, 'var(--vocal)')}
                ${renderStat('ëŒ„ìŠ¤', m.dance, 'var(--dance)')}
                ${renderStat('ë¹„ì£¼ì–¼', m.visual, 'var(--visual)')}
                ${renderStat('ì˜ˆëŠ¥', m.variety, 'var(--variety)')}
                ${renderStat('ë§¤ë ¥', m.charm, 'var(--charm)')}
                <div style="font-size:11px; text-align:right; margin-top:8px; color:#888;">í”¼ë¡œë„: ${m.fatigue}%</div>
            </div>
        `).join('');

        const cCont = document.getElementById('comm-container');
        cCont.innerHTML = gameState.community.map(c => `
            <div class="comm-post"><span class="comm-site ${c.site==='ì—ë±€'?'site-ebem':'site-cafe'}">${c.site}</span><div style="font-size:13px; margin-top:4px;">${c.content}</div></div>
        `).reverse().join('');
    }

    function renderStat(l, v, c) { return `<div class="stat-row"><div class="stat-label">${l}</div><div class="stat-bar-bg"><div class="stat-bar-fill" style="width:${(v/20)*100}%; background:${c}"></div></div><div style="width:15px; text-align:right; font-size:10px;">${v}</div></div>`; }

    function trainAction() {
        const name = document.getElementById('sel-member').value;
        const statKey = document.getElementById('sel-stat').value;
        const m = gameState.members.find(item => item.name === name);
        if(m.acted) { alert("ì´ë¯¸ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤."); return; }
        m[statKey] = Math.min(20, m[statKey] + 1); m.fatigue += 20; m.acted = true;
        updateDisplay();
        alert(`${name} íŠ¸ë ˆì´ë‹ ì™„ë£Œ!`);
    }

    function nextDay() {
        gameState.day++;
        gameState.finance -= 500000;
        gameState.members.forEach(m => { m.fatigue = Math.max(0, m.fatigue - 20); m.acted = false; });
        document.getElementById('daily-news').innerText = newsList[Math.floor(Math.random()*newsList.length)];
        
        // 40% í™•ë¥ ë¡œ ì´ë²¤íŠ¸ ë°œìƒ
        if(Math.random() < 0.4) {
            const ev = randomEvents[Math.floor(Math.random()*randomEvents.length)];
            showEvent(ev);
        } else {
            alert(`${gameState.day}ì¼ì°¨ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.`);
            updateDisplay();
        }
    }

    function showEvent(ev) {
        document.getElementById('event-title').innerText = ev.title;
        document.getElementById('event-desc').innerText = ev.desc;
        const container = document.getElementById('event-choices');
        container.innerHTML = '';
        ev.choices.forEach(c => {
            const btn = document.createElement('button');
            btn.className = "primary-btn choice-btn";
            btn.innerText = c.text;
            btn.onclick = () => { c.effect(); hideEvent(); updateDisplay(); };
            container.appendChild(btn);
        });
        document.getElementById('eventModal').style.display = 'block';
    }

    function hideEvent() { document.getElementById('eventModal').style.display = 'none'; }
    function addComm(site, content) {
        gameState.community.push({ site, content });
        if(gameState.community.length > 20) gameState.community.shift();
    }

    updateDisplay();
</script>
</body>
</html>
